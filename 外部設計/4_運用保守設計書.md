# 運用保守設計書

## 1. 運用体制

### 1.1 運用チーム構成

- **システム管理者**

  - 役割: システム全体の管理・監視
  - 人数: 2 名
  - 勤務: ローテーション

- **アプリケーション保守担当**

  - 役割: アプリケーションの保守・改善
  - 人数: 3 名
  - 勤務: 平日日中

- **ヘルプデスク**
  - 役割: ユーザーサポート
  - 人数: 2 名
  - 勤務: シフト制

### 1.2 連絡体制

- **緊急時連絡フロー**

  1. 監視システムからのアラート
  2. オンコール担当者への通知
  3. 必要に応じて上位者へエスカレーション
  4. インシデント管理システムへの記録

- **定期報告体制**
  - 日次報告: システム状況
  - 週次報告: 課題・改善点
  - 月次報告: KPI・統計情報

## 2. 監視設計

### 2.1 監視ツール

- **インフラ監視**

  - Tool: Cloud Monitoring
  - 対象: サーバー、ネットワーク、DB

- **アプリケーション監視**

  - Tool: Cloud Trace
  - 対象: API、エンドポイント、エラー

- **ログ監視**
  - Tool: Cloud Logging
  - 対象: システムログ、アクセスログ

### 2.2 監視項目と閾値

- **リソース監視**

  - CPU 使用率: 80%以上でアラート
  - メモリ使用率: 85%以上でアラート
  - ディスク使用率: 90%以上でアラート

- **パフォーマンス監視**

  - レスポンスタイム: 3 秒以上でアラート
  - エラーレート: 1%以上でアラート
  - 同時接続数: 1000 以上でアラート

- **ビジネス指標監視**
  - 予約成功率: 95%未満でアラート
  - システム稼働率: 99.9%未満でアラート
  - ユーザー満足度: 4.0 未満でアラート

## 3. バックアップ設計

### 3.1 バックアップ対象

- **データベース**

  - 方式: スナップショット
  - 頻度: 日次（深夜 3 時）
  - 保持期間: 30 日
  - 世代管理: 7 世代

- **アプリケーション**

  - 方式: イメージバックアップ
  - 頻度: 更新時
  - 保持: 直近 5 版

- **設定ファイル**
  - 方式: Git 管理
  - 頻度: 変更時
  - 保持: 永続

### 3.2 リストア手順

1. バックアップの選択
2. リストア環境の準備
3. データの復元
4. 整合性チェック
5. 動作確認
6. 本番切り替え

## 4. 障害対策

### 4.1 障害レベル定義

- **レベル 1（軽度）**

  - 影響: 一部機能の低下
  - 対応: 通常営業時間内で対応
  - 例: レスポンス遅延

- **レベル 2（中度）**

  - 影響: 重要機能の停止
  - 対応: 即時対応、2 時間以内に復旧
  - 例: 予約機能の停止

- **レベル 3（重度）**
  - 影響: システム全体の停止
  - 対応: 緊急対応、経営層への報告
  - 例: サービス全停止

### 4.2 障害対応フロー

1. 障害検知
2. 一次切り分け
3. 担当者アサイン
4. 原因究明
5. 対策実施
6. 影響確認
7. 報告書作成

## 5. メンテナンス計画

### 5.1 定期メンテナンス

- **週次メンテナンス**

  - 時間: 毎週月曜 2:00-4:00
  - 内容: ログローテーション、キャッシュクリア

- **月次メンテナンス**

  - 時間: 第一日曜 1:00-5:00
  - 内容: セキュリティパッチ適用、システム更新

- **四半期メンテナンス**
  - 時間: 3/6/9/12 月最終日曜
  - 内容: 大規模アップデート、機能追加

### 5.2 臨時メンテナンス

- セキュリティ緊急対応
- 重大バグ修正
- パフォーマンスチューニング

## 6. セキュリティ運用

### 6.1 セキュリティチェック

- **日次チェック**

  - 不正アクセスログ
  - エラーログ
  - リソース使用状況

- **週次チェック**

  - セキュリティアラート
  - アクセス権限
  - バックアップ状態

- **月次チェック**
  - 脆弱性スキャン
  - セキュリティパッチ
  - ユーザー権限棚卸

### 6.2 インシデント対応

1. 検知
2. 一次対応（被害拡大防止）
3. 原因究明
4. 恒久対策立案
5. 対策実施
6. 再発防止策の展開

## 7. 改善・最適化

### 7.1 定期レビュー

- **週次レビュー**

  - パフォーマンス分析
  - エラー傾向分析
  - キャパシティ計画

- **月次レビュー**

  - KPI 評価
  - コスト分析
  - ユーザーフィードバック分析

- **四半期レビュー**
  - システム全体評価
  - 中長期計画の見直し
  - 技術負債の評価

### 7.2 改善プロセス

1. 課題の特定
2. 影響度評価
3. 優先順位付け
4. 解決策立案
5. 実施計画作成
6. 改善実施
7. 効果測定
